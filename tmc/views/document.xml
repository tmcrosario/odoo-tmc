<?xml version="1.0" encoding="UTF-8"?>
<odoo>

    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_list_action">
        <field name="name">Documents</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
    </record>

    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="important_document_list_action">
        <field name="name">Documents</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('important', '=', True)]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_tree"
            model="ir.ui.view">
        <field name="name">tmc.document.tree</field>
        <field name="model">tmc.document</field>
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <tree string="Document"
                  default_order="period desc, number desc, dependence_id, document_type_id"
                  decoration-danger="highest_highlight=='high'"
                  decoration-warning="highest_highlight=='medium'">
                <field name="name" />
                <field name="date" />
                <field name="document_object_copy" />
                <field name="topics_display_name" />
                <field name="highest_highlight"
                       invisible="True" />
            </tree>
        </field>
    </record>

    <!-- SIMPLE TREE VIEW -->
    <record id="view_document_simple_tree"
            model="ir.ui.view">
        <field name="name">tmc.document.simple.tree</field>
        <field name="model">tmc.document</field>
        <field name="arch"
               type="xml">
            <tree string="Document"
                  default_order="period desc, number desc, dependence_id, document_type_id">
                <field name="name" />
                <field name="date" />
                <field name="document_object_copy" />
                <field name="secondary_topic_ids"
                       invisible="1" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_form"
            model="ir.ui.view">
        <field name="name">tmc.document.form</field>
        <field name="model">tmc.document</field>
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <form duplicate="0">
                <sheet>
                    <div class="oe_right oe_button_box"
                         name="buttons"
                         groups="base.group_user"
                         attrs="{'invisible':[('create_date','=', False)]}">
                        <button class="oe_inline oe_stat_button"
                                type="action"
                                attrs="{'invisible':[('highlights_count','=', 0)]}"
                                icon="fa-warning"
                                name="highlights_count_button">
                            <field string="Highlight(s)" name="highlights_count" widget="statinfo"/>
                        </button>
                        <!-- <button class="oe_inline oe_stat_button"
                                type="object"
                                string="Show Content"
                                name="show_or_add_content"
                                attrs="{'invisible':[('reference_document','=', 0)]}"
                                context="{'default_document_id': active_id}"
                                icon="fa-file-text" />
                        <button class="oe_inline oe_stat_button"
                                type="object"
                                string="Add Content"
                                name="show_or_add_content"
                                attrs="{'invisible':[('reference_document','!=', 0)]}"
                                context="{'default_document_id': active_id}"
                                icon="fa-file-text-o" /> -->
                    </div>
                    <div class="oe_title">
                        <label for="name"
                               class="oe_edit_only"
                               string="Document Name" />
                        <h1>
                            <field name="name"
                                   string="Document Name"/>
                        </h1>
                        <h3>
                            <field name="document_object_copy" class="oe_read_only"/>
                        </h3>
                    </div>
                    <field name="create_date"
                           invisible="True" />
                    <field name="reference_document"
                           invisible="True" />
                    <group>
                        <group>
                            <field name="dependence_id"
                                   context="{'search_default_filter_actual_nomenclator': True}"
                                   default_focus="1" />
                            <field name="document_type_id"
                                   attrs="{'invisible':[('dependence_id','=', False)]}" />
                            <field name="document_type_abbr"
                                   invisible="True" />
                        </group>
                        <group>
                            <field name="number"
                                   attrs="{'required':[('document_type_abbr', '!=', 'ACT')], 'invisible':[('document_type_abbr', '=', 'ACT')]}" />
                            <field name="period" />
                        </group>
                    </group>
                    <group>
                        <group string="Reference"
                               attrs="{'invisible':[('name', 'in', [u'Unnamed Document', u'Documento Sin Nombre'])]}">
                            <field name="date" />
                            <field name="document_object_required"
                                   invisible="True" />
                            <field name="document_object"
                                   attrs="{'required':[('document_object_required', '=', True)]}" />
                        </group>
                        <field name="document_topic_ids"
                               invisible="True" />
                        <group string="Topics"
                               attrs="{'invisible':['|', ('document_topic_ids', '=', []), ('create_date','=', False)]}">
                            <field name="main_topic_ids"
                                   widget="many2many_tags"
                                   options="{'no_create_edit': True}" />
                            <field name="secondary_topic_ids"
                                   attrs="{'invisible':[('main_topic_ids', '=', [])]}"
                                   widget="many2many_tags"
                                   options="{'no_create_edit': True}"
                                   context="{'tree_view_ref':'tmc.document_secondary_topic_tree_view'}" />
                        </group>
                    </group>
                    <notebook attrs="{'invisible':[('name', 'in', [u'Unnamed Document', u'Documento Sin Nombre'])]}">
                        <page name="related_documents"
                              string="Related Documents">
                            <field name="related_document_ids">
                                <tree>
                                    <field name="name" />
                                </tree>
                            </field>
                        </page>
                        <page name="highlights"
                              string="Highlights">
                            <field name="highlight_ids" />
                        </page>
                    </notebook>
                </sheet>
            </form>
        </field>
    </record>

    <!-- SIMPLE FORM VIEW -->
    <record id="view_simple_tmc_document_form"
            model="ir.ui.view">
        <field name="name">tmc.document.form</field>
        <field name="model">tmc.document</field>
        <field name="priority">10</field>
        <field name="arch"
               type="xml">
            <form duplicate="0">
                <sheet>
                    <h2>
                        <field name="name"/>
                    </h2>
                    <group>
                        <field name="date" />
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <!-- SEARCH VIEW -->
    <record model="ir.ui.view"
            id="document_search_view">
        <field name="name">document.search</field>
        <field name="model">tmc.document</field>
        <field name="arch"
               type="xml">
            <search string="Document">
                <field name="document_type_id"
                       search_domain="['|', ('document_type_id', '=', self)]" />
                <field name="number"
                       search_domain="['|', ('number', '=', self)]" />
                <field name="period"
                       search_domain="['|', ('period', '=', self)]" />
                <field name="dependence_id"
                       filter_domain="[('dependence_id', 'ilike', self)]" />
                <field name="document_object"
                       filter_domain="[('document_object', 'ilike', self)]" />
                <field name="secondary_topic_ids"
                       string="Document Topic"
                       filter_domain="['|', ('secondary_topic_ids.name', 'ilike', self), ('main_topic_ids.name', 'ilike', self)]" />
            </search>
        </field>
    </record>

    <!-- DECRETO -->
    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_dec_list_action">
        <field name="name">Decretos</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('document_type_id','=','Decreto')]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_dec_tree"
            model="ir.ui.view">
        <field name="name">tmc.document_dec.tree</field>
        <field name="model">tmc.document_dec</field>
        <field name="arch"
               type="xml">
            <tree>
                <field name="document_id" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_dec_form"
            model="ir.ui.view">
        <field name="name">tmc.document_dec.form</field>
        <field name="model">tmc.document_dec</field>
        <field name="inherit_id"
               ref="tmc.view_document_form" />
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <xpath expr="//field[@name='name']"
                   position="after">
                <field name="document_id"
                       invisible="True" />
            </xpath>
            <!-- <button name="show_or_add_content" position="attributes">
            <attribute name="invisible">True</attribute>
        </button> -->
        </field>
    </record>

    <!-- DICTAMEN -->
    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_dic_list_action">
        <field name="name">Decretos</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('document_type_id','=','Dictámen')]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_dic_tree"
            model="ir.ui.view">
        <field name="name">tmc.document_dic.tree</field>
        <field name="model">tmc.document_dic</field>
        <field name="arch"
               type="xml">
            <tree>
                <field name="document_id" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_dic_form"
            model="ir.ui.view">
        <field name="name">tmc.document_dic.form</field>
        <field name="model">tmc.document_dic</field>
        <field name="inherit_id"
               ref="tmc.view_document_form" />
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <xpath expr="//field[@name='name']"
                   position="after">
                <field name="document_id"
                       invisible="True" />
            </xpath>
            <!-- <button name="show_or_add_content" position="attributes">
                <attribute name="invisible">True</attribute>
            </button> -->
        </field>
    </record>

    <!-- EXPEDIENTE -->
    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_exp_list_action">
        <field name="name">Decretos</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('document_type_id','=','Expediente')]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_exp_tree"
            model="ir.ui.view">
        <field name="name">tmc.document_exp.tree</field>
        <field name="model">tmc.document_exp</field>
        <field name="arch"
               type="xml">
            <tree>
                <field name="document_id" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_exp_form"
            model="ir.ui.view">
        <field name="name">tmc.document_exp.form</field>
        <field name="model">tmc.document_exp</field>
        <field name="inherit_id"
               ref="tmc.view_document_form" />
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <xpath expr="//field[@name='name']"
                   position="after">
                <field name="document_id"
                       invisible="True" />
            </xpath>
            <!-- <button name="show_or_add_content" position="attributes">
            <attribute name="invisible">True</attribute>
        </button> -->
        </field>
    </record>

    <!-- RESOLUCION EXTRAORDINARIA -->
    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_ext_list_action">
        <field name="name">Decretos</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('document_type_id','=','Resolución Extraordinaria')]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_ext_tree"
            model="ir.ui.view">
        <field name="name">tmc.document_ext.tree</field>
        <field name="model">tmc.document_ext</field>
        <field name="arch"
               type="xml">
            <tree>
                <field name="document_id" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_ext_form"
            model="ir.ui.view">
        <field name="name">tmc.document_ext.form</field>
        <field name="model">tmc.document_ext</field>
        <field name="inherit_id"
               ref="tmc.view_document_form" />
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <xpath expr="//field[@name='name']"
                   position="after">
                <field name="document_id"
                       invisible="True" />
            </xpath>
            <!-- <button name="show_or_add_content" position="attributes">
            <attribute name="invisible">True</attribute>
        </button> -->
        </field>
    </record>

    <!-- LEGAJO -->
    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_leg_list_action">
        <field name="name">Decretos</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('document_type_id','=','Legajo')]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_leg_tree"
            model="ir.ui.view">
        <field name="name">tmc.document_leg.tree</field>
        <field name="model">tmc.document_leg</field>
        <field name="arch"
               type="xml">
            <tree>
                <field name="document_id" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_leg_form"
            model="ir.ui.view">
        <field name="name">tmc.document_leg.form</field>
        <field name="model">tmc.document_leg</field>
        <field name="inherit_id"
               ref="tmc.view_document_form" />
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <xpath expr="//field[@name='name']"
                   position="after">
                <field name="document_id"
                       invisible="True" />
            </xpath>
            <!-- <button name="show_or_add_content" position="attributes">
            <attribute name="invisible">True</attribute>
        </button> -->
        </field>
    </record>

    <!-- RESOLUCION -->
    <!-- WINDOW ACTION -->
    <record model="ir.actions.act_window"
            id="document_res_list_action">
        <field name="name">Decretos</field>
        <field name="res_model">tmc.document</field>
        <field name="view_type">form</field>
        <field name="view_mode">tree,form</field>
        <field name="domain">[('document_type_id','=','Resolución')]</field>
    </record>

    <!-- TREE VIEW -->
    <record id="view_document_res_tree"
            model="ir.ui.view">
        <field name="name">tmc.document_res.tree</field>
        <field name="model">tmc.document_res</field>
        <field name="arch"
               type="xml">
            <tree>
                <field name="document_id" />
            </tree>
        </field>
    </record>

    <!-- FORM VIEW -->
    <record id="view_document_res_form"
            model="ir.ui.view">
        <field name="name">tmc.document_res.form</field>
        <field name="model">tmc.document_res</field>
        <field name="inherit_id"
               ref="tmc.view_document_form" />
        <field name="priority">5</field>
        <field name="arch"
               type="xml">
            <xpath expr="//field[@name='name']"
                   position="after">
                <field name="document_id"
                       invisible="True" />
            </xpath>
            <!-- <button name="show_or_add_content" position="attributes">
            <attribute name="invisible">True</attribute>
        </button> -->
        </field>
    </record>

</odoo>